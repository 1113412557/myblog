<div style="padding: 15px;">
    <table id="type_table" lay-filter="type_table"></table>
</div>

<!-- 评论管理工具条渲染模版-->
<script type="text/html" id="type_table_bar">
    <!-- 跳转到评论所在文章以及页面位置-->
    <a class="layui-btn layui-btn-xs" lay-event="view" href="" target="_blank">查看</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>

<script>
    //文章表格
    layui.table.render({
        elem: '#type_table',
        width: 1200,
        url: '/js/testTable.json?'+new Date().getTime(),  //数据接口
        where:{token:''},
        page: true , //开启分页
        cols: [[    //表头
            {field: 'title', title: '发表者', width: 200},
            {field: 'pv', title: '联系方式', width: 200},
            {field: 'time', title: '发表时间', width: 200,sort: true,
                templet: function(fileds){
                    var d=new Date();
                    d.setTime(fileds.time);
                    return d.toLocaleDateString();
            }},
            {title: '操作',align:'center',width: 200,toolbar:'#type_table_bar'}
        ]]
    });

    //评论管理表格工具条事件监听
    layui.table.on('tool(type_table)', function(obj){ //tool是工具条事件名，参数是table原始容器的lay-filter属性值
        var layEvent = obj.event; //获得 lay-event 对应的值
        if(layEvent === 'del'){ //删除
            layer.confirm('确定要删除该评论吗？', function(index){

                layer.close(index);
                layer.load(1);
                //向服务器发送删除文章请求
                $.ajax({
                    url:"",
                    type: "DELETE",
                    success:function (result) {
                        layer.closeAll('loading');//关闭loading图标
                        obj.del(); //删除表格对应行并更新缓存
                    }

                })
            });
        }
    });
</script>